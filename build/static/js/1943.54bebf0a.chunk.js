"use strict";(self.webpackChunkneordinary_template_react_js_admin=self.webpackChunkneordinary_template_react_js_admin||[]).push([[1943],{71943:(e,s,l)=>{l.r(s),l.d(s,{default:()=>f});var r=l(72791),a=l(57689),d=l(78983),t=l(3854),o=l(46327),n=l(46819),i=l(1966),c=l(36906),u=l(72426),m=l.n(u),h=l(44219),v=l(80184);const b=e=>{let{items:s,onClick:l,columns:a,className:t,datePickerHidden:n=!0,setSelectedProduct:u,onUpdateInvoice:b}=e;const[x,p]=(0,r.useState)([]),[j,I]=(0,r.useState)(),[Y,f]=(0,r.useState)(!1),[D,S]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[M,g]=(0,r.useState)(!1);(0,r.useEffect)((()=>{p(s)}),[s]),(0,r.useEffect)((()=>{var e;y?null!==(e=x[0])&&void 0!==e&&e.orderDate?I(x.filter((e=>m()(e.orderDate,"YYYYMMDDHHmmss").format("YYYY-MM-DD")>=D&&m()(e.orderDate,"YYYYMMDDHHmmss").format("YYYY-MM-DD")<=y))):I(x.filter((e=>m()(e.createdAt,"YYYYMMDDHHmmss").format("YYYY-MM-DD")>=D&&m()(e.createdAt,"YYYYMMDDHHmmss").format("YYYY-MM-DD")<=y))):I("")}),[y]);return(0,v.jsxs)(v.Fragment,{children:[n&&(0,v.jsxs)(d.rb,{className:"d-md-flex justify-content-md-end pt-2 pb-2",children:[(0,v.jsx)(d.u5,{className:"me-md-2",color:"success",size:"sm",children:"\uc8fc\ubb38\uc0c1\ud0dc \ubcc0\uacbd"}),(0,v.jsx)(d.b7,{xs:4,children:(0,v.jsx)(c.Z,{className:"me-md-2",setStartDate:S,setEndDate:N})})]}),(0,v.jsx)(i.u,{items:j||x,columns:a||null,columnSorter:!0,pagination:!0,paginationProps:{limit:10},tableHeadProps:{id:"smTable"},clickableRows:!0,onRowClick:e=>{g(e),u(e)},tableProps:{hover:!0,responsive:!0,striped:!0,align:"middle",className:t},scopedColumns:{radioButton:(e,s)=>(0,v.jsx)("td",{children:(0,v.jsx)("input",{id:"".concat(s),name:"select-radio",type:"radio",checked:e.orderItemId===M.orderItemId,readOnly:!0})}),orderStatus:e=>{let{orderStatus:s}=e;return(0,v.jsx)("td",{children:(0,v.jsx)(d.C_,{size:"sm",color:(0,h.O)(s),children:s})})},invoiceNumber:e=>(0,v.jsx)("td",{children:e.invoiceNumber}),orderItemPrice:e=>{let{orderItemPrice:s}=e;return(0,v.jsx)("td",{className:"orderItemPrice",children:(0,o.ks)(s)})},totalPrice:e=>{let{totalPrice:s}=e;return(0,v.jsx)("td",{className:"totalPrice",children:(0,o.ks)(s)})},orderDate:e=>{let{orderDate:s}=e;return(0,v.jsx)("td",{children:m()(s,"YYYYMMDDHHmmss").format("YYYY. MM. DD")})},payDate:e=>{let{payDate:s}=e;return(0,v.jsx)("td",{children:m()(s,"YYYYMMDDHHmmss").format("YYYY. MM. DD")})}},noItemsLabel:"\ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.",itemsPerPage:20})]})};var x=l(96672),p=l(19311);const j=e=>{let{value:s,visible:l,setVisible:i}=e;const c=(0,a.s0)(),[u,m]=(0,r.useState)({orderId:0,orderNumber:"",name:"",paymentMethod:"",totalPrice:0,orderDate:"",payDate:"",receiver:"",address:"",normalNumber:"",phoneNumber:"",totalCount:"",subInfos:[]}),[h,j]=(0,r.useState)(""),[I,Y]=(0,r.useState)(""),[f,D]=(0,r.useState)(""),[S,y]=(0,r.useState)("");(0,r.useEffect)((()=>{l&&m(s)}),[l]);const N=()=>{j(""),y(""),i(!1)},M=async(e,s)=>{try{const{data:l}=await x.Z.request({method:x.w.PATCH,url:p.l.PATCH_MALL_ORDERS_INVOICE,path:{orderItemId:e},data:{invoiceNumber:s}});if(null===l||void 0===l||!l.isSuccess)return void(2014===(null===l||void 0===l?void 0:l.code)?c("/login"):alert(null===l||void 0===l?void 0:l.message));const r=u.subInfos.findIndex((s=>s.orderItemId===e));let a=u.subInfos;a[r].invoiceNumber=s,m((e=>({...e,subInfos:a}))),y(a[r]),alert(null===l||void 0===l?void 0:l.message)}catch(l){alert("\ub124\ud2b8\uc6cc\ud06c \ud1b5\uc2e0 \uc2e4\ud328. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}},g=e=>{const{value:s}=e.target;Y(s)};return(0,v.jsxs)(d.Tk,{size:"xl",visible:l,onClose:N,children:[(0,v.jsx)(d.p0,{children:(0,v.jsx)(d.fl,{children:"\uc8fc\ubb38 \uc0c1\uc138\uc815\ubcf4"})}),(0,v.jsxs)(d.sD,{children:[(0,v.jsxs)(d.rb,{className:"p-2",children:[(0,v.jsx)(t.Z,{id:"orderId",placeholder:"User Id",label:"No",value:u.no,readOnly:!0,disabled:!0}),(0,v.jsx)(t.Z,{id:"orderNumber",placeholder:"",label:"\uc8fc\ubb38\ubc88\ud638",value:u.orderNumber,readOnly:!0,disabled:!0})]}),(0,v.jsxs)(d.rb,{className:"p-2",children:[(0,v.jsx)(t.Z,{id:"name",placeholder:"",label:"\uc8fc\ubb38\uc790",value:u.name,readOnly:!0,disabled:!0}),(0,v.jsx)(t.Z,{id:"receiver",placeholder:"",label:"\uc218\ucde8\uc778",value:u.receiver,readOnly:!0,disabled:!0})]}),(0,v.jsxs)(d.rb,{className:"p-2",children:[(0,v.jsx)(t.Z,{id:"normalNumber",placeholder:"",label:"\uc77c\ubc18\uc804\ud654\ubc88\ud638",value:u.normalNumber,readOnly:!0,disabled:!0}),(0,v.jsx)(t.Z,{id:"phoneNumber",placeholder:"",label:"\ud734\ub300\uc804\ud654\ubc88\ud638",value:u.phoneNumber,readOnly:!0,disabled:!0})]}),(0,v.jsxs)(d.rb,{className:"p-2",children:[(0,v.jsx)(t.Z,{id:"totalCount",placeholder:"",label:"\uc8fc\ubb38 \ucd1d\uc218\ub7c9",value:u.totalCount,readOnly:!0,disabled:!0}),(0,v.jsx)(t.Z,{id:"orderDate",placeholder:"",label:"\uc8fc\ubb38\uc77c",value:u.orderDate,readOnly:!0,disabled:!0})]}),(0,v.jsxs)(d.rb,{className:"p-2",children:[(0,v.jsx)(t.Z,{id:"paymentMethod",placeholder:"",label:"\uacb0\uc81c\uc218\ub2e8",value:u.paymentMethod,readOnly:!0,disabled:!0}),(0,v.jsx)(t.Z,{id:"payDate",placeholder:"",label:"\uacb0\uc81c\uc77c",value:u.payDate,readOnly:!0,disabled:!0})]}),(0,v.jsx)(d.rb,{className:"p-2",children:(0,v.jsx)(t.Z,{id:"totalPrice",placeholder:"",label:"\ucd1d \uacb0\uc81c\uae08\uc561",value:(0,o.ks)(u.totalPrice),readOnly:!0,disabled:!0})}),(0,v.jsx)(d.rb,{className:"p-2",children:(0,v.jsx)(t.Z,{id:"address",placeholder:"",label:"\uc8fc\uc18c",value:u.address,readOnly:!0,disabled:!0})}),(0,v.jsx)("br",{}),(0,v.jsx)(b,{items:u.subInfos,columns:n.xL,searchInputHidden:!1,datePickerHidden:!1,setSelectedProduct:e=>{y(e)},onUpdateInvoice:M,className:"subInfos"}),(0,v.jsxs)("div",{className:"pb-2 d-md-flex justify-content-md-end",children:[(0,v.jsxs)(d.LX,{value:h,className:"me-md-2 orderStatusForm",size:"sm",onChange:e=>{const{value:s}=e.target;j(s)},children:[(0,v.jsx)("option",{children:"\uc8fc\ubb38\uc0c1\ud0dc \uc120\ud0dd"}),(0,v.jsx)("option",{value:"\uacb0\uc81c \ub300\uae30",children:"\uacb0\uc81c \ub300\uae30"}),(0,v.jsx)("option",{value:"\uacb0\uc81c \uc644\ub8cc",children:"\uacb0\uc81c \uc644\ub8cc"}),(0,v.jsx)("option",{value:"\ubc30\uc1a1 \uc900\ube44\uc911",children:"\ubc30\uc1a1 \uc900\ube44\uc911"}),(0,v.jsx)("option",{value:"\ubc30\uc1a1\uc911",children:"\ubc30\uc1a1\uc911"}),(0,v.jsx)("option",{value:"\ubc30\uc1a1 \uc644\ub8cc",children:"\ubc30\uc1a1 \uc644\ub8cc"}),(0,v.jsx)("option",{value:"\ucde8\uc18c \uc694\uccad",children:"\ucde8\uc18c \uc694\uccad"}),(0,v.jsx)("option",{value:"\uad50\ud658 \uc694\uccad",children:"\uad50\ud658 \uc694\uccad"})]}),(0,v.jsx)(d.u5,{className:"me-md-2",color:"success",size:"sm",onClick:()=>h?S.orderItemId?(window.confirm("\uc8fc\ubb38 \uc0c1\ud0dc\ub97c \ubcc0\uacbd \ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&("\ucde8\uc18c \uc694\uccad"===h||"\uad50\ud658 \uc694\uccad"===h?(async(e,s,l)=>{try{const{data:r}=await x.Z.request({method:x.w.POST,url:p.l.POST_MALL_ORDERS_STATUS,path:{orderItemId:e},data:{orderStatus:s,reason:l}});if(null===r||void 0===r||!r.isSuccess)return void(2014===(null===r||void 0===r?void 0:r.code)?c("/login"):alert(null===r||void 0===r?void 0:r.message));const a=u.subInfos.findIndex((s=>s.orderItemId===e));let d=u.subInfos;d[a].orderStatus=s,m((e=>({...e,subInfos:d}))),alert(null===r||void 0===r?void 0:r.message)}catch(r){alert("\ub124\ud2b8\uc6cc\ud06c \ud1b5\uc2e0 \uc2e4\ud328. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}})(S.orderItemId,h,I):(async(e,s)=>{try{const{data:l}=await x.Z.request({method:x.w.PATCH,url:p.l.PATCH_MALL_ORDERS_STATUS,path:{orderItemId:e},query:{orderStatus:s}});if(null===l||void 0===l||!l.isSuccess)return void(2014===(null===l||void 0===l?void 0:l.code)?c("/login"):alert(null===l||void 0===l?void 0:l.message));const r=u.subInfos.findIndex((s=>s.orderItemId===e));let a=u.subInfos;a[r].orderStatus=s,m((e=>({...e,subInfos:a}))),alert(null===l||void 0===l?void 0:l.message)}catch(l){alert("\ub124\ud2b8\uc6cc\ud06c \ud1b5\uc2e0 \uc2e4\ud328. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}})(S.orderItemId,h)),j(""),void Y("")):alert("\uc8fc\ubb38\uc0c1\ud488\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."):alert("\uc8fc\ubb38\uc0c1\ud0dc\ub97c \uc120\ud0dd\ud574\uc8fc\uc138\uc694."),children:"\uc8fc\ubb38\uc0c1\ud0dc \ubcc0\uacbd"}),(0,v.jsx)(d.jO,{className:"me-md-2 orderInvoiceForm",placeholder:"\uc1a1\uc7a5\ubc88\ud638 \uc785\ub825",size:"sm",onChange:e=>{const{value:s}=e.target;D(s)}}),(0,v.jsx)(d.u5,{className:"me-md-2",color:"warning",size:"sm",onClick:()=>f?11!==f.length?alert("\uc1a1\uc7a5\ubc88\ud638\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.(11\uc790\ub9ac)"):S.orderItemId?void M(S.orderItemId,f):alert("\uc8fc\ubb38\uc0c1\ud488\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."):alert("\uc1a1\uc7a5\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),children:"\uc1a1\uc7a5\ub4f1\ub85d"}),(0,v.jsx)(d.u5,{color:"warning",size:"sm",onClick:()=>{if(null!==S&&void 0!==S&&S.invoiceNumber){const{invoiceNumber:e}=S;window.open("https://www.ilogen.com/web/personal/trace/"+e)}else window.open("https://www.ilogen.com/web/personal/tkSearch")},children:"\uc1a1\uc7a5\uc870\ud68c"})]}),"\ucde8\uc18c \uc694\uccad"===h&&(0,v.jsx)(d.PB,{id:"reason",placeholder:"\ucde8\uc18c \uc0ac\uc720\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694",rows:"3",value:I,onChange:g}),"\uad50\ud658 \uc694\uccad"===h&&(0,v.jsx)(d.PB,{id:"reason",placeholder:"\uad50\ud658 \uc0ac\uc720\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694",rows:"3",value:I,onChange:g})]}),(0,v.jsx)(d.Ym,{children:(0,v.jsx)(d.u5,{color:"secondary",onClick:N,children:"\ucde8\uc18c"})})]})};var I=l(20961),Y=l(59159);const f=()=>{const e=(0,a.s0)(),[s,l]=(0,r.useState)([]),[t,i]=(0,r.useState)({}),[c,u]=(0,r.useState)(!1),m=async s=>{try{const{data:r}=await x.Z.request({method:x.w.GET,url:p.l.GET_MALL_ORDERS,query:{orderStatus:s||""}});if(null===r||void 0===r||!r.isSuccess||(0,o.xb)(null===r||void 0===r?void 0:r.result))return console.log("loadMallorderList error"),void(2014===(null===r||void 0===r?void 0:r.code)?e("/login"):alert(null===r||void 0===r?void 0:r.message));l(r.result.responses.map(((e,s)=>({...e,no:r.result.responses.length-s}))))}catch(r){console.log(r),alert("\ub124\ud2b8\uc6cc\ud06c \ud1b5\uc2e0 \uc2e4\ud328. \uc7a0\uc2dc\ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}};(0,r.useEffect)((()=>{m()}),[]);return(0,v.jsxs)(d.rb,{children:[(0,v.jsx)(I.Z,{title:"\uc8fc\ubb38 \uad00\ub9ac"}),(0,v.jsx)(d.b7,{xs:12,children:(0,v.jsx)(d.xH,{className:"mb-4",children:(0,v.jsx)(d.sl,{children:(0,v.jsx)(Y.Z,{items:s,onClick:e=>{i(e),u(!c)},columns:n.W_,onLoadMallorderList:m,datePicker:!0,dataSearch:!0})})})}),(0,v.jsx)(j,{value:t,visible:c,setVisible:u,onLoadMallorderList:m,readOnly:!0})]})}}}]);
//# sourceMappingURL=1943.54bebf0a.chunk.js.map